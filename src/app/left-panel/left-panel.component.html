<div class="selection-disabled panel-fixed">
    <div class="" *ngIf="msgboolean">

      <div class="row mt-5">
            <div class="col-md-10" style="padding-left: 10px;">
              <div class="custom-control custom-checkbox p-0">
                <input type="checkbox" class="new-entity-checkbox" (click)="defineNewEntity()" name="showDefineNewEntity" [(ngModel)]="showDefineNewEntity">
                <label class="checkbox-msg" for="customCheck1">Define new entity</label>
              </div>
            </div>
            <div class="col-md-1 p-0" style="position:relative;right: 4px;">
          <span>
          <img src="assets/Icons/grey-tag.svg" *ngIf="!showDefineNewEntity || (showDefineNewEntity && highlight !== 'tag')" class="iconentity-width" (click)="entityprivilage('tag')">
          <img src="assets/Icons/blue-tag.svg" *ngIf="showDefineNewEntity && highlight == 'tag'" class="iconentity-width"
            [ngClass]="{'box-shadow': highlight == 'tag'}">
        </span>
            </div>
            <div class="col-md-1 p-0">
          <span>
          <img src="assets/Icons/grey-word.svg" *ngIf="!showDefineNewEntity ||( showDefineNewEntity && highlight !== 'word')" class="iconentity-width" (click)="entityprivilage('word')">
          <img src="assets/Icons/blue-word.svg" *ngIf="showDefineNewEntity && highlight == 'word'" class="iconentity-width"
            [ngClass]="{'box-shadow': highlight == 'word'}">
        </span>
            </div>
          </div>

      
    </div>
    <div class="entity mt-3" *ngIf="display_pending_entities=='true'" style="padding: 15px 15px 20px 33px;">
      <label>Do you want to accept all pending named entities?</label>
      <label class="d-inline">
        <span class="edit" data-toggle="tooltip" title="Reject Annotation">
          <img src="assets/Icons/reject.svg" class="ml-3 icon-width"
             (click)="accept_all_annotation('reject')" style="cursor:pointer">
        </span>

        <span class="edit" data-toggle="tooltip" title="Accept Annotation">
          <img src="assets/Icons/accept.svg" class="ml-3 icon-width"
             (click)="accept_all_annotation('accept')" style="cursor:pointer">
        </span> 

      </label>
    </div>
    <div class="entity mt-3" *ngIf="display_pending_entities=='true'" style="padding: 15px 15px 20px 33px;">
      <label>Select a named entity to manually accept or reject Savvy Brain proposal</label>      
    </div>
    <div class="entity mt-3" *ngIf="entitymenu" cdkDrag >
      <button type="button" class="close mr-2" data-dismiss="modal" data-toggle="modal"
        data-target="#closemodal">&times;</button>
        <div class="compliance" *ngIf="data_accept == 'N'">
          <label class="normalized">unique normalized value : </label>
          <label style="font-weight:bold;word-break: break-word;">{{uniquevalue}}</label>
          <p>Level of compliance : {{level_compliance}}
        </div>
      <div class="entity_row">  
      <div [ngClass]="{'markas': data_accept != 'N'}" class=""><img src="assets/Icons/ICONS_grey-149.svg" class="icon-width"><b> Mark
          as:</b>
        </div>
      <input class="margin mt-3" type="radio" name="entity type" value="Named Entity"
        (change)="onEntitytypeChange('Named Entity')" [(ngModel)]="entityType" [checked]="entityType != 'entity'">Named Entity<br>
      <input class="margin mt-2" type="radio" name="entity type" value="entity" [(ngModel)]="entityType" (change)="onEntitytypeChange('entity')"
        [checked]="entityType === 'entity'">Entity<br>
      <!-- <img src="assets/Icons/ICONS_grey-149.svg" class="icon-width"><b> Details:</b> -->
      <div class="main-header">
        <img src="assets/Icons/ICONS_grey-149.svg" class="icon-width"><b> Details:</b>
      </div>
      
      <!-- <span class="card">
        <div class="card-header">
          <label class="marginleft d-inline"> Select type</label> 
        </div>
          <div class="card-body ml-3">
            <div *ngIf="entityType === 'Named Entity'">
              <select class="selecttype pl-3" (change)="ontypeChange($event)" [(ngModel)]="type">
                <option *ngFor="let type of namedentitytypelist">{{type}}</option>
              </select>
            </div>
            <div *ngIf="entityType === 'entity'">
              <select class="selecttype pl-3" (change)="ontypeChange($event)" [(ngModel)]="type">
                <option value="entity">Entity</option>
              </select>
            </div>
          </div>
      </span>
      <span class="card">
        <div class="card-header">
            <label class="marginleft  mb-0 d-inline "> Select label</label>
               </div>
          <div class="card-body ml-3">
            <div *ngIf="entityType === 'Named Entity'">
              <select class="selecttype  pl-3" (change)="onlabelChange($event)" [(ngModel)]="label">
                <option *ngFor="let label of namedentitylabellist">{{label.dataEntityLabel}}</option>
              </select>
            </div>
            <div *ngIf="entityType === 'entity'">
              <input class="selecttype  pl-3" type="text" name="label" [(ngModel)]="label" (keypress)="onlabeladd($event)">
            </div>
          </div>
      </span>
      <span class="card">
        <div class="card-header">
            <label class="marginleft  mb-0 d-inline">Insert Unique value</label>          
        </div>
          <div class="card-body ml-3 unique-value">
            <input class="selecttype pl-3" type="text" name="uniquevalue" list="uniquevalue"
            [(ngModel)]="uniquevalue" (keyup)="onuniquevalueadd($event)">           
          </div>
      </span> -->

      <div class="row detail-padding">
        <div class="col-md-12">
          <label class="m-0"> Select type</label>
        </div>
        <div class="col-md-12">
          <div *ngIf="entityType === 'Named Entity'">
            <div class="form-group m-0">
              <select class="form-control selectdpdwn cursor" id="exampleSelect1" (change)="ontypeChange()" [(ngModel)]="type">
              <option *ngFor="let type of namedentitytypelist">{{type}}</option>
            </select>
            </div>
          </div>
          <div *ngIf="entityType === 'entity'">
            <div class="form-group m-0">
              <select class="form-control selectdpdwn cursor" id="exampleSelect1" (change)="ontypeChange()" [(ngModel)]="type">
              <option value="entity">entity</option>
            </select>
            </div>
          </div>
        </div>
      </div>

      <div class="row detail-padding">
        <div class="col-md-12">
          <label class="m-0"> Select label</label>
        </div>
        <div class="col-md-12">
          <div *ngIf="entityType === 'Named Entity'">
            <div class="form-group m-0">
              <select class="form-control selectdpdwn cursor" id="exampleSelect1" (change)="onlabelChange()" [(ngModel)]="label">
              <option *ngFor="let label of namedentitylabellist">{{label.dataEntityLabel}}</option>
            </select>
            </div>
          </div>
          <div *ngIf="entityType === 'entity'">
            <div class="form-group m-0">
              <input class="form-control selectdpdwn cursor" type="text" name="label" [(ngModel)]="label" (keyup)="onlabeladd()">
            </div>
          </div>
        </div>
      </div>
      <div class="row detail-padding">
        <div class="col-md-12">
          <label class="m-0">Normalized Value</label>
        </div>
        <div class="col-md-12">
          <div *ngIf="entityType === 'Named Entity'">
            <div class="form-group m-0">
              <input class="form-control selectdpdwn" type="text" name="uniquevalue" list="uniquevalue" [(ngModel)]="uniquevalue" 
              (keyup)="onuniquevalueadd()">
            </div>
          </div>
          <div *ngIf="entityType === 'entity'">
            <div class="form-group m-0">
              <div class="form-control selectdpdwn">{{uniqueEntityId}}

              </div>
            </div>
          </div>
        </div>
      </div>
 
      <!-- <img src="assets/Icons/ICONS_grey-146.svg" class="icon-width"><b class="ml-1">Relations:</b> -->
      <div class="main-header-rel">
        <img src="assets/Icons/ICONS_grey-146.svg" class="icon-width"><b class="ml-1">Relations:</b>
      </div>
      <!-- <p class="marginrelation mb-0 mt-2" id="addNew" data-toggle="modal"
        [attr.data-target]="'#'+ modalpop">Add new</p> -->
  <p class="marginrelation mb-0 mt-2" id="addNew"  [ngClass]="{'disable-rel': disableRelCreOrEdit === true}" 
      (click)="addNewRelation()" data-toggle="modal" [attr.data-target]="'#'+ modalpop">Add new</p>
  <p class="marginrelation mb-0 mt-2"  [ngClass]="{'disable-rel': disableRelCreOrEdit === true}"
      (click)="editRelation()" data-toggle="modal" [attr.data-target]="'#'+ modalpop">Edit</p>

      <!-- <img src="assets/Icons/ICONS_grey-148.svg" class="icon-width"><b class="ml-1">Settings</b> -->
      <div class="main-header">
         <img src="assets/Icons/ICONS_grey-148.svg" class="icon-width"><b class="ml-1">Settings</b>
      </div>
      <p class="marginrelation mt-2" data-toggle="modal" data-target="#deletemodal" [ngClass]="{'disable-deleteentity':deleteentitydisabled == true}">Delete entity</p>

      <!-- <label class="d-inline" style="padding-left: 150px;" *ngIf="data_accept != 'N'">
        <span class="edit" data-toggle="tooltip" title={{toolTip1}}>
          <img src="assets/Icons/ICONS_thick.svg" class="ml-3 icon-width"
            [ngClass]="{'disabled': issaveDisabled === false}" (click)="saveentity()">
        </span>
      </label> -->

        <div class="row" *ngIf="data_accept != 'N'">
          <div class="col-md-12 d-flex flex-row-reverse">
            <div>
              <span data-toggle="tooltip" title={{toolTip1}}>
            <img src="assets/Icons/ICONS_thick.svg" class="icon-thick" [ngClass]="{'disabled': issaveDisabled === false}" (click)="saveentity()">
          </span>
            </div>
          </div>
        </div>

      <div class="row" *ngIf="data_accept == 'N'" >
        <div class="col-md-12 d-flex flex-row-reverse">
          <div>
            <span class="edit" data-toggle="tooltip" title="Reject Annotation">
          <img src="assets/Icons/reject.svg" class="ml-3 icon-width"
             (click)="accept_annotation('reject')">
        </span>

            <span class="edit" data-toggle="tooltip" title="Accept Annotation">
          <img src="assets/Icons/accept.svg" class="ml-3 icon-width"
             (click)="accept_annotation('accept')">
        </span>
          </div>
        </div>
      </div>
           
    </div>
    </div>
  </div>


  <ng-template #annoRelDeleteConfirm let-modal>
    <div class="modal-content-rel rel-suc-modal">
      <div class="modal-header">
        <button type="button" class="close" (click)="exit()">&times;</button>
      </div>
      <div class="modal-body  rel-success">
        <p>On modifying the annoatation, relations associated with the annoation will get deleted.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="icon-cancel" data-dismiss="modal" (click)="cancelAnnotationEdit()">Cancel</button>
        <button type="button" class="icon-next" data-toggle="modal" data-dismiss="modal" (click)="removeEntityAssociatedRel()">Accept</button>
      </div>
    </div>
  </ng-template>

  <div class="modal" id="NewOrEditRelationInfo" aria-hidden="false" data-backdrop="false">
    <div class="modal-dialog">
      <div class="modal-content new-rel">
        <div class="modal-header">

          <h6 *ngIf="createRel" class="modal-title-rel ml-3 mt-4 font-weight-bold">Adding a new relation</h6>
          <h6 *ngIf="editRel" class="modal-title-rel ml-3 mt-4 font-weight-bold">Editing a relation</h6>

          <button type="button" class="close" data-dismiss="modal" data-toggle="modal" (click)="cancelMessage()">&times;</button>
        </div>

        <div *ngIf="createRel" class="modal-body newrelation">
          <p>1. Select the entity that you want to connect in a relation.</p>
          <p>2. Determine the direction and type of relation.</p>
          <p>3. Confirm the relation.</p>
        </div>
        <div *ngIf="editRel" class="modal-body newrelation">
          <p>1. Select the entity associated in the relation that you want to edit.</p>
          <p>2. Delete or update the direction and type of relation.</p>
          <p>3. Confirm the changes.</p>
        </div>

        <div class="row">
          <form>
            <div class="form-group">
              <div *ngIf="createRel" class="custom-control custom-checkbox">
                <input type="checkbox" class="" id="customCheck1" name="showNewRelMsgModal" [(ngModel)]="showNewRelMsgModal">
                <label class="checkbox-msg" for="customCheck1">Do not show me this message again</label>
              </div>
              <div *ngIf="editRel" class="custom-control custom-checkbox">
                <input type="checkbox" id="editRel" name="showEditRelMsgModal" [(ngModel)]="showEditRelMsgModal">
                <label class="checkbox-msg" for="editRel">Do not show me this message again</label>
              </div>
            </div>
          </form>
        </div>

        <div class="modal-footer modal-footer-rel">
          <button type="button" class="icon-cancel" data-dismiss="modal" data-toggle="modal" (click)="cancelMessage()">Cancel</button>
          <button *ngIf="createRel" type="button" class="icon-next" data-dismiss="modal" data-toggle="modal" (click)="createRelation()">Next</button>
          <button *ngIf="editRel" type="button" class="icon-next" data-dismiss="modal" data-toggle="modal">Next</button>
        </div>

      </div>
    </div>
  </div>


  <ng-template #relationDetail let-modal>
    <div class="modal-content-rel">
      <div class="modal-header">
        <h6 class="modal-title-rel" *ngIf="createRel">Adding a new relation</h6>
        <h6 class="modal-title-rel" *ngIf="editRel">Editing a relation</h6>
        <button type="button" class="close" (click)="cancelrelation()">&times;</button>
      </div>
      <div class="modal-body">
        <p class="modal-sub-heading">Name:</p> 
        <form>
          <select class="border-0 select dropdown-width" (change)="chooseRelationType()" name="rel_type" [(ngModel)]="rel_type"> 
          <option *ngFor="let rel_type of relationTypes">{{rel_type}}</option>
        </select>
        </form>
        <!-- <form>
          <select class="border-0 select dropdown-width" (change)="chooseRelationType()" name="relation" [(ngModel)]="relation">
          <option *ngFor="let relation of relationTypes">{{relation}}</option>
        </select>
        </form> -->
        <hr class="my-0">
        <p class="mt-2 modal-sub-heading">Direction:</p>
        <form>
          <select class="border-0 select dropdown-width" name="direction" [(ngModel)]="direction" (change)="chooseDirection()">
          <option *ngFor="let direction of directions">{{direction}}</option>
        </select>
        </form>
        <hr class="my-0">
        <p class="mt-1" style="margin-top: 1rem;font-size:12px;color:#001135">*Keep in mind that the direction of a relation determines its available types</p>
        <div class="row pl-3" style="margin: 40px 0px;">
          <!-- <div class="col-md-3" style="text-align: center;">{{from_uniqueValue |slice:0:10}}</div> -->

          <div class="col-md-3" style="text-align: center;" *ngIf="from_type !== 'entity'">{{from_uniqueValue |slice:0:10}}</div>
          <div class="col-md-3" style="text-align: center;" *ngIf="from_type === 'entity'">{{from_entityText |slice:0:10}}</div>
          <div class="col-md-4">
            <div class="col-md-12" style="text-align: center;position: absolute;bottom: 11px;">
              {{rel_type |slice:0:10}}
            </div>
            <div class="col-md-12" style="position: absolute;">
              <span *ngIf="showLeftArrow">
              <img src="assets/Icons/arrow_left.svg">
            </span>
              <span *ngIf="showRightArrow">
              <img src="assets/Icons/arrow_right.svg">
            </span>
            </div>
          </div>
          <!-- <div class="col-md-5" style="text-align: center;">{{to_uniqueValue |slice:0:10}}</div> -->
          <div class="col-md-5" style="text-align: center;" *ngIf="to_type !== 'entity'">{{to_uniqueValue |slice:0:10}}</div>
          <div class="col-md-5" style="text-align: center;" *ngIf="to_type ==='entity'">{{to_entityText |slice:0:10}}</div>
        </div>
      </div>
      <div class="modal-footer modal-footer-rel">
        <div class="btn-position" *ngIf="editRel">
          <button type="button" class="icon-rel-delete" data-dismiss="modal" data-toggle="modal" data-target="#relDeleteConfirm" (click)="deleteRelConfirm(from_uniqueValue,rel_type,to_uniqueValue)">Delete</button>
        </div>
        <button type="button" class="icon-cancel" (click)="cancelrelation()">Cancel</button>
        <button type="button" class="icon-next" data-toggle="modal" [ngClass]="{'disable-rel': hasAllowedRelations === false}" (click)="acceptRelation()">Accept</button>
      </div>
    </div>
  </ng-template>

<ng-template #relSuccess let-modal>
  <div class="modal-content-rel rel-suc-modal">
    <div class="modal-header">
      <button type="button" class="close" (click)="exit()">&times;</button>
    </div>
    <div class="modal-body  rel-success">
      <p *ngIf="createRel">The new relation is created.</p>
      <p *ngIf="editRel">The relation is updated.</p>
      <p *ngIf="deleteRel">The relation is deleted.</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="icon-next" data-dismiss="modal" data-toggle="modal" (click)="exit()">Exit</button>
    </div>
  </div>
</ng-template>


<!-- <div class="modal" id="warningMsg" aria-hidden="true" data-backdrop="false">
  <div class="modal-dialog">
    <div class="modal-content rel-suc-modal">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"(click)="exit()">&times;</button>
      </div>
      <div class="modal-body rel-success">
        <p>{{warningMsg}}</p>
      </div>
      <div class="modal-footer modal-footer-rel">
        <button type="button" class="icon-next" data-dismiss="modal" data-toggle="modal" (click)="exit()">Exit</button>
      </div>
    </div>
  </div>
</div> -->


<div class="modal" id="relDeleteConfirm" aria-hidden="true" data-backdrop="false">
  <div class="modal-dialog">
    <div class="modal-content rel-del-confirm1">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <p class="mt-1 modal-sub-heading" style="margin-bottom: 63px;">Are you sure you want to delete this relation?</p>
        <div class="row mt-3 pl-3">
          <div class="col-md-3 p-0" style=" text-align: center; ">{{from_uniqueValue |slice:0:10}}</div>
          <div class="col-md-4">{{rel_type |slice:0:10}}
            <span *ngIf="showLeftArrow">
              <img src="assets/Icons/arrow_left.svg">
            </span>
            <span *ngIf="showRightArrow">
              <img src="assets/Icons/arrow_right.svg">
            </span>
          </div>
          <div class="col-md-5 p-0" style=" text-align: center; ">{{to_uniqueValue |slice:0:10}}</div>
        </div>
      </div>
      <div class="modal-footer modal-footer-rel">
        <button type="button" class="icon-cancel" data-dismiss="modal" data-toggle="modal" data-target="#relationDetail">Cancel</button>
        <button type="button" class="icon-next" data-dismiss="modal" data-toggle="modal" data-target="#relDeleteSuccess" (click)="deleteRelation()">Accept</button>
      </div>
    </div>
  </div>
</div>
  
  <div class="modal" id="closemodal" aria-hidden="true" data-backdrop="false">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <!-- <h5 class="modal-title ml-3">Close</h5> -->
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body mb-5 mr-5">
          <p>Do you want to close without saving changes?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary icon-cancel-delete" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-secondary icon-cancel-delete" data-dismiss="modal" (click)="closeclose()">Close</button>
        </div>
      </div>
    </div>
  </div>
  
  <div class="modal" id="deletemodal" aria-hidden="true" data-backdrop="false">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <!-- <h6 class="modal-title ml-3">Delete this entity</h6> -->
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body mb-5 mr-5">
          <p>This action will delete marked elements and its relations.</p>
        </div>
        <div class="modal-footer" style="padding-bottom: 0px;">
          <button type="button" class="btn btn-secondary icon-cancel-delete" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-secondary icon-cancel-delete" data-dismiss="modal" (click)="deleteentity()">Delete</button>
        </div>
      </div>
    </div>
  </div>


